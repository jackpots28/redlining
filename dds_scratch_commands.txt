THIS IS A LARGE SCRATCH FILE

======================================================================================================================================================================================================================

# OLD

Server-9105-22A-SN7845931-LR
lgendev1
lgenprod1
lurbatdev1
lurbatprod1
lmobilepreprod1
lmobiledev1

Server-9105-22A-SN78458D1-OC
ogendev1<p></p>
ogenprod1
ourbatdev1
ourbatprod1
omobilepreprod1
omobiledev1

Server-8284-22A-SN214887V-CORP
cgendev1
cgenprod1


===========================================================================================================
===========================================================================================================

# OLD

ogenprod1   -> Server-9105-22A-SN78458D1-OC *STARTED*
omobiledev1 -> Server-9105-22A-SN78458D1-OC * SCSI IS ATTACHED HERE*
ourbatdev1  -> Server-9105-22A-SN78458D1-OC
ourbatprod1 -> Server-9105-22A-SN78458D1-OC

--------------------------------------------------------------------------------------

mkvterm -m Server-9105-22A-SN78458D1-OC -p ogenprod1
mkvterm -m Server-9105-22A-SN78458D1-OC -p omobiledev1
mkvterm -m Server-9105-22A-SN78458D1-OC -p ourbatdev1
mkvterm -m Server-9105-22A-SN78458D1-OC -p ourbatprod1


rmvterm -m Server-9105-22A-SN78458D1-OC -p ogenprod1
rmvterm -m Server-9105-22A-SN78458D1-OC -p omobiledev1
rmvterm -m Server-9105-22A-SN78458D1-OC -p ourbatdev1
rmvterm -m Server-9105-22A-SN78458D1-OC -p ourbatprod1


chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o shutdown --immed -n ogenprod1
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o shutdown --immed -n omobiledev1
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o shutdown --immed -n ourbatdev1
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o shutdown --immed -n ourbatprod1


chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o on -n ogenprod1 -f default
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o on -n omobiledev1 -f default
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o on -n ourbatdev1 -f default
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o on -n ourbatprod1 -f default


ip=172.16.19.183::172.16.18.1:255.255.254.0:ogenprod1:enP16398p1s0:none inst.vnc inst.vncpassword=redhat
ip=172.16.19.179::172.16.18.1:255.255.254.0:omobiledev1:enP16399p1s0:none inst.vnc inst.vncpassword=redhat
ip=172.16.19.185::172.16.18.1:255.255.254.0:ourbatdev1:enP16402p1s0:none inst.vnc inst.vncpassword=redhat
ip=172.16.19.187::172.16.18.1:255.255.254.0:ourbatprod1:enP16403p1s0:none inst.vnc inst.vncpassword=redhat


ip=172.16.111.21::172.16.111.1:255.255.255.0:omobilepreprod1:enP16400p1s0:none inst.vnc inst.vncpassword=redhat

chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o shutdown --immed -n  omobilepreprod1
chsysstate -m Server-9105-22A-SN78458D1-OC -r lpar -o on -n omobilepreprod1 -f default 
mkvterm -m Server-9105-22A-SN78458D1-OC -p omobilep


===========================================================================================================
===========================================================================================================

# OLD

Server-9105-22A-SN7845931-LR


JESSE ? lgendev1.dillards.com,enP16388p1s0,b6:00:ef:b5:19:00
GAGE ? lgenprod1.dillards.com,enP16389p1s0,b6:00:e5:89:bd:00

JACK ? lmobiledev1.dillards.com,enP16390p1s0,b6:00:ed:ed:50:00
VLAN 574
IP 172.16.19.178
GW 172.16.18.1
SM 255.255.254.0

ip=172.16.19.178::172.16.18.1:255.255.254.0:lmobiledev1:enP16390p1s0:none inst.vnc inst.vncpassword=redhat
chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o on -n lmobiledev1 -f default
chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o shutdown --immed -n lmobiledev1
mkvterm -m Server-9105-22A-SN7845931-LR -p lmobiledev1


DONE
GAGE - lmobilepreprod1.dillards.com,enP16391p1s0,b6:00:ed:d0:15:00
JACK - lmobileprod1.dillards.com,enP16392p1s0,b6:00:ec:84:d5:00
GAGE - lurbatdev1.dillards.com,enP16393p1s0,b6:00:ea:e9:16:00
JACK - lurbatprod1.dillards.com,enP16394p1s0,b6:00:e2:39:9c:00




ip=<IP>::<GW>:<SM>:<HOSTNAME>:<ADAPTER>:none inst.vnc inst.vncpassword=redhat
chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o on -n <HOSTNAME> -f default
chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o shutdown --immed -n <HOSTNAME>
mkvterm -m Server-9105-22A-SN7845931-LR -p <HOSTNAME>

--------------------------------------------------------------------------------------------------------------

ip=172.16.19.186::172.16.18.1:255.255.254.0:lurbatprod1:enP16394p1s0:none inst.vnc inst.vncpassword=redhat

chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o on -n lurbatprod1 -f default
chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o shutdown --immed -n lurbatprod1


mkvterm -m Server-9105-22A-SN7845931-LR -p lurbatprod1

----------------------------------------------------------------------------------------------------------------

# OLD

lmobileprod1 

VLAN 502

IP 172.16.1.60
GW 172.16.1.1
SM 255.255.254.0

chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o on -n lmobileprod1 -f default
chsysstate -m Server-9105-22A-SN7845931-LR -r lpar -o shutdown --immed -n lmobileprod1

mkvterm -m Server-9105-22A-SN7845931-LR -p lmobileprod1

ip=172.16.19.186::172.16.18.1:255.255.254.0:lmobileprod1:enP16392p1s0:none inst.vnc inst.vncpassword=redhat

===========================================================================================================
===========================================================================================================

cgenprod1
ip=10.40.232.86::10.40.232.1:255.255.255.0:cgenprod1:enP16390p1s0:none inst.vnc inst.vncpassword=redhat

-----------------------------------------------------------------------------------------------------------

cgendev1

Server-8284-22A-SN214887V-CORP

VLAN 233 (Corp Mongo / Basement Misc)
IP 10.40.232.85
GW 10.40.232.1
SM 255.255.255.0

adapter 1 : enP16391p1s0

ip=10.40.232.60::10.40.232.1:255.255.255.0:cgendev1:enP16391p1s0:none inst.vnc inst.vncpassword=redhat
chsysstate -m Server-8284-22A-SN214887V-CORP -r lpar -o on -n cgendev1
chsysstate -m Server-8284-22A-SN214887V-CORP -r lpar -o shutdown --immed -n cgendev1

-----------------------------------------------------------------------------------------------------------

# APRIL 11, 2023

$ python

>>> import hpilo       
>>> print(hpilo.__version__)
4.4.3

>>> ilo = hpilo.Ilo('csplindprod3-imm.dillards.com', <<USERID>>, <<PASSWD>>, delayed=True)
>>> ilo.get_embedded_health()
>>> print(ilo.call_delayed())
....


-----------------------------------------------------------------------------------------------------------

# APRIL 13, 2023

DECOMM LIST FOR P9 Frames

7801B90
- oaixhmc1d
- lpars: ocmprod1_decomm (OFF), oiamuiprod1_decomm (OFF), ogenusprod1 (ON)
- vios: ovioprod1-7801B90 (ON), ovioprod2-7801B90 (ON)

7804890
- oaixhmc1d
- lpars: ourbatchprod1 (ON)
- vios: ovioprod1-7804890 (ON), ovioprod2-7804890 (ON)

simsjo-a@laixhmc1d:~> for i in $(lssyscfg -r sys -F name | grep -iv bmc | grep -ie 7801b10); do lssyscfg -m $i -r lpar -F name,lpar_id,state; done
lcmprod1_decomm,38,Not Activated
liamuiprod1_decomm,37,Not Activated
lvioprod2-7801B10,2,Running
lvioprod1-7801B10,1,Running

simsjo-a@oaixhmc1d:~> for i in $(lssyscfg -r sys -F name | grep -iv bmc | grep -ie 7801ba0); do lssyscfg -m $i -r lpar -F name,lpar_id,state; done
oiamdbprod1_decomm,17,Not Activated
ocmdbprod1_decomm,13,Not Activated
oiamdbdev1_decomm,7,Not Activated
ocmdbdev1_decomm,3,Not Activated
ovioprod2-7801BA0,2,Running
ovioprod1-7801BA0,1,Running

simsjo-a@oaixhmc1d:~> for i in $(lssyscfg -r sys -F name | grep -iv bmc | grep -ie 7802930); do lssyscfg -m $i -r lpar -F name,lpar_id,state; done
otsmdev1_decomm,5,Not Activated
ovioprod2-7802930,2,Running
ovioprod1-7802930,1,Running

-----------------------------------------------------------------------------------------------------------

# APRIL 13, 2023

LIST OF DIRS FOR PACKAGING AIX UPDATES

AIX_72-TL05_SP05
JAVA_LATEST_2023_CPU_SDK_JRE
OpenSSH_8.1.112.1201
openssl-1.1.2.2000
sshd_fix_config.sh
sudo_1.9.13.3

-----------------------------------------------------------------------------------------------------------

# APRIL 14, 2023

AIX UPDATES / PROCESS HISTORY

[simsjo-a@cadminsrv01 AIX_72-TL05_SP05_Maint]$ ll
total 4
drwxrwxr-x 4 root unixadm   86 Apr 13 11:02 AIX_72-TL05_SP05
drwxr-xr-x 2 root unixadm  100 Apr 14 07:26 JAVA_LATEST_2023_CPU_SDK_JRE
drwxr-xr-x 2 root unixadm 4096 Jun 17  2022 OpenSSH_8.1.112.1201
drwxr-xr-x 2 root unixadm   90 Mar 20 14:53 openssl-1.1.2.2000
drwxr-xr-x 2 root unixadm   45 Apr 13 10:39 sudo_1.9.13.3
[simsjo-a@cadminsrv01 AIX_72-TL05_SP05_Maint]$ ll JAVA_LATEST_2023_CPU_SDK_JRE/
total 426460
-rw-r--r-- 1 root unixadm 167814144 Mar 29 02:08 Java8.jre
-rw-r--r-- 1 root unixadm  13783040 Mar 29 02:08 Java8.sdk
-rw-r--r-- 1 root unixadm 241326080 Mar 28 16:37 Java8_64.jre
-rw-r--r-- 1 root unixadm  13765632 Mar 28 16:37 Java8_64.sdk
[simsjo-a@cadminsrv01 AIX_72-TL05_SP05_Maint]$ 


-----------------------------------------------------------------------------------------------------------

# APRIL 14, 2023

simsjo-a@lnimsrv1: $ cd /fix
/fix
simsjo-a@lnimsrv1: $ ls -lart
total 8
drwxrwxrwx    3 root     system          256 Apr 14 10:21 .
drwxr-xr-x    2 root     system          256 Apr 14 10:21 lost+found
drwxr-xr-x   23 root     system         4096 Apr 14 10:27 ..
/fix
simsjo-a@lnimsrv1: $ sudo ln -s /opt/freeware/bin/rsync_64 /usr/bin/rsync
/fix
simsjo-a@lnimsrv1: $ ls -lart
total 232
drwxr-xr-x    2 root     system          256 Apr 14 10:21 lost+found
drwxr-xr-x   23 root     system         4096 Apr 14 10:27 ..
-rw-r--r--    1 simsjo-a unixadm       53789 Apr 14 11:37 submit.cf
-rw-r--r--    1 simsjo-a unixadm       53789 Apr 14 11:37 sendmail.cf
drwxrwxrwx    3 root     system          256 Apr 14 11:38 .
/fix
simsjo-a@lnimsrv1: $ sudo cp -p /etc/mail/submit.cf /etc/mail/submit.cf.GA
/fix
simsjo-a@lnimsrv1: $ sudo cp /fix/submit.cf /etc/mail/submit.cf
/fix
simsjo-a@lnimsrv1: $ sudo cp /fix/sendmail.cf /etc/mail/sendmail.cf
/fix
simsjo-a@lnimsrv1: $ sudo ls -l /etc/mail/submit.cf /etc/mail/sendmail.cf
-rw-r--r--    1 root     system        53789 Apr 14 11:39 /etc/mail/sendmail.cf
-rw-r--r--    1 root     system        53789 Apr 14 11:39 /etc/mail/submit.cf
/fix
simsjo-a@lnimsrv1: $ sudo ls -l /usr/lib/sendmail
lrwxrwxrwx    1 root     system           22 Jan 25 2022  /usr/lib/sendmail -> /usr/sbin/sendmail_ssl
/fix
simsjo-a@lnimsrv1: $ sudo ln -sf /usr/sbin/sendmail_ssl /usr/lib/sendmail
/fix
simsjo-a@lnimsrv1: $ sudo ls -l /usr/lib/sendmail                        
lrwxrwxrwx    1 root     system           22 Apr 14 11:40 /usr/lib/sendmail -> /usr/sbin/sendmail_ssl
/fix
simsjo-a@lnimsrv1: $ sudo touch /etc/mail/genericstable
/fix
simsjo-a@lnimsrv1: $ sudo ls -l /etc/mail/genericstable
-rw-r--r--    1 root     system            0 Apr 14 11:40 /etc/mail/genericstable
/fix
simsjo-a@lnimsrv1: $ sudo makemap -r hash /etc/mail/genericstable.db < /etc/mail/genericstable
/fix
simsjo-a@lnimsrv1: $ sudo grep -ie unixadmin /etc/mail/aliases
/fix
simsjo-a@lnimsrv1: $ echo "root:   unixadmin@dillards.com" | sudo tee -a /etc/mail/aliases
root:   unixadmin@dillards.com
/fix
simsjo-a@lnimsrv1: $ sudo grep -ie unixadmin /etc/mail/aliases                            
root:   unixadmin@dillards.com
/fix
simsjo-a@lnimsrv1: $ 
/fix
simsjo-a@lnimsrv1: $ sudo newaliases
WARNING: Group writable directory /var/spool
WARNING: Group writable directory /var/spool/mqueue
/etc/mail/aliases: line 81: root... Warning: duplicate alias name root
/etc/mail/aliases: 27 aliases, longest 50 bytes, 359 bytes total
/fix
simsjo-a@lnimsrv1: $ echo "Test email from $( hostname )" | mailx -s "Test - $( hostname )" unixadmin@dillards.com
/fix
simsjo-a@lnimsrv1: $ 



-----------------------------------------------------------------------------------------------------------

# APRIL 18, 2023

### FROM HMC VTERM
###
root@lnimsrv1: # ifconfig -a
en2: flags=e080863,14c0<UP,BROADCAST,NOTRAILERS,RUNNING,SIMPLEX,MULTICAST,GROUPRT,64BIT,LARGESEND,CHAIN>
        inet 172.16.3.48 netmask 0xffffff00 broadcast 172.16.3.255
         tcp_sendspace 262144 tcp_recvspace 262144 rfc1323 1
lo0: flags=e08084b,c0<UP,BROADCAST,LOOPBACK,RUNNING,SIMPLEX,MULTICAST,GROUPRT,64BIT,LARGESEND,CHAIN>
        inet 127.0.0.1 netmask 0xff000000 broadcast 127.255.255.255
        inet6 ::1%1/64
         tcp_sendspace 262144 tcp_recvspace 262144 rfc1323 1
-
root@lnimsrv1: # lspv
hdisk0          00c01c10817fcc05                    rootvg          active      
hdisk1          00c01c10b6c15ef6                    altinst_rootvg              
hdisk2          00c01c10a2a9b2bc                    nimvg           active      
hdisk3          00c01c109d1619b0                    nimvg           active      
hdisk4          00c01c109d161a51                    nimvg           active      
hdisk5          00c01c109d161aee                    nimvg           active      
/root
-
root@lnimsrv1: # bootinfo -b
hdisk0
/root
-
root@lnimsrv1: # bootlist -m normal -o
hdisk0 blv=hd5 pathid=0
hdisk0 blv=hd5 pathid=1
hdisk0 blv=hd5 pathid=2
hdisk0 blv=hd5 pathid=3
/root
-
root@lnimsrv1: # cat /etc/resolv.conf
search dillards.com ocp.dillards.com 
nameserver 172.16.18.15
nameserver 10.100.126.15
options timeout:1
options attempts:1
-
root@lnimsrv1: # lsdev -Cc adapter
ent0    Defined   00-00 PCIe3 2 PORT 10 Gb NIC&ROCE SR/Cu ADAPTER VF (b315161014101f06)
ent1    Defined   01-00 PCIe3 2 PORT 10 Gb NIC&ROCE SR/Cu ADAPTER VF (b315161014101f06)
ent2    Available       EtherChannel / IEEE 802.3ad Link Aggregation
ent3    Available 02-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
ent4    Available 03-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
fcs0    Available 10-T0 Virtual Fibre Channel Client Adapter
fcs1    Available 11-T0 Virtual Fibre Channel Client Adapter
fcs2    Available 20-T0 Virtual Fibre Channel Client Adapter
fcs3    Available 21-T0 Virtual Fibre Channel Client Adapter
hdcrypt Available       Data encryption
pkcs11  Available       ACF/PKCS#11 Device
vsa0    Available       LPAR Virtual Serial Adapter
vscsi0  Defined         Virtual SCSI Client Adapter




### FROM SSH SESSION
###
root@lnimsrv1: # ifconfig -a
en2: flags=e080863,14c0<UP,BROADCAST,NOTRAILERS,RUNNING,SIMPLEX,MULTICAST,GROUPRT,64BIT,LARGESEND,CHAIN>
        inet 172.16.3.48 netmask 0xffffff00 broadcast 172.16.3.255
         tcp_sendspace 262144 tcp_recvspace 262144 rfc1323 1
lo0: flags=e08084b,c0<UP,BROADCAST,LOOPBACK,RUNNING,SIMPLEX,MULTICAST,GROUPRT,64BIT,LARGESEND,CHAIN>
        inet 127.0.0.1 netmask 0xff000000 broadcast 127.255.255.255
        inet6 ::1%1/64
         tcp_sendspace 262144 tcp_recvspace 262144 rfc1323 1
-
root@lnimsrv1: # lsdev -Cc if
en0 Defined   02-00 Standard Ethernet Network Interface
en1 Defined   03-00 Standard Ethernet Network Interface
en2 Available       Standard Ethernet Network Interface
et0 Defined   02-00 IEEE 802.3 Ethernet Network Interface
et1 Defined   03-00 IEEE 802.3 Ethernet Network Interface
et2 Defined         IEEE 802.3 Ethernet Network Interface
lo0 Available       Loopback Network Interface
/root
-
root@lnimsrv1: # lsdev -Cc adapter
ent0    Available 02-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
ent1    Available 03-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
ent2    Available       EtherChannel / IEEE 802.3ad Link Aggregation
fcs0    Available 10-T0 Virtual Fibre Channel Client Adapter
fcs1    Available 11-T0 Virtual Fibre Channel Client Adapter
fcs2    Available 20-T0 Virtual Fibre Channel Client Adapter
fcs3    Available 21-T0 Virtual Fibre Channel Client Adapter
hdcrypt Available       Data encryption
pkcs11  Available       ACF/PKCS#11 Device
vsa0    Available       LPAR Virtual Serial Adapter
vscsi0  Defined         Virtual SCSI Client Adapter
/root
-
root@lnimsrv1: # lsattr -El en2
alias4                      IPv4 Alias including Subnet Mask              True
alias6                      IPv6 Alias including Prefix Length            True
arp           on            Address Resolution Protocol (ARP)             True
authority                   Authorized Users                              True
broadcast                   Broadcast Address                             True
monitor       off           Enable/Disable monitor for virtual Ethernet   True
mtu           1500          Maximum IP Packet Size for This Device        True
mtu_bypass    on            Enable/Disable largesend for virtual Ethernet True
netaddr       172.16.3.48   Internet Address                              True
netaddr6                    IPv6 Internet Address                         True
netmask       255.255.255.0 Subnet Mask                                   True
prefixlen                   Prefix Length for IPv6 Internet Address       True
remmtu        576           Maximum IP Packet Size for REMOTE Networks    True
rfc1323       1             Enable/Disable TCP RFC 1323 Window Scaling    True
security      none          Security Level                                True
state         up            Current Interface Status                      True
tcp_mssdflt                 Set TCP Maximum Segment Size                  True
tcp_nodelay                 Enable/Disable TCP_NODELAY Option             True
tcp_recvspace 262144        Set Socket Buffer Space for Receiving         True
tcp_sendspace 262144        Set Socket Buffer Space for Sending           True
thread        off           Enable/Disable thread attribute               True


#########################################################################
# Ran on Lnimsrv1 hdisk0:
root@lnimsrv1: # lsdev -Cc adapter
ent0    Defined   00-00 PCIe3 2 PORT 10 Gb NIC&ROCE SR/Cu ADAPTER VF (b315161014101f06)
ent1    Defined   01-00 PCIe3 2 PORT 10 Gb NIC&ROCE SR/Cu ADAPTER VF (b315161014101f06)
ent2    Available       EtherChannel / IEEE 802.3ad Link Aggregation
ent3    Available 02-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
ent4    Available 03-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
fcs0    Available 10-T0 Virtual Fibre Channel Client Adapter
fcs1    Available 11-T0 Virtual Fibre Channel Client Adapter
fcs2    Available 20-T0 Virtual Fibre Channel Client Adapter
fcs3    Available 21-T0 Virtual Fibre Channel Client Adapter
hdcrypt Available       Data encryption
pkcs11  Available       ACF/PKCS#11 Device
vsa0    Available       LPAR Virtual Serial Adapter
vscsi0  Defined         Virtual SCSI Client Adapter
/root
root@lnimsrv1: # rmdev -dl ent0
ent0 deleted
/root
root@lnimsrv1: # rmdev -dl ent1
ent1 deleted
/root
root@lnimsrv1: # rmdev -dl ent2
Method error (/usr/lib/methods/ucfgcommo):
        0514-062 Cannot perform the requested function because the
                 specified device is busy.

/root
root@lnimsrv1: # rmdev -dl ent3
ent3 deleted
/root
root@lnimsrv1: # rmdev -dl ent4
Method error (/usr/lib/methods/ucfgcommo):
        0514-010 Error returned from odm_run_method.
cfgcommo: can't run /usr/lib/methods/cfgdmxeth

/root
root@lnimsrv1: # cfgmgmr
-ksh93: cfgmgmr: not found
/root
root@lnimsrv1: # cfgmgr
Method error (/usr/lib/methods/cfgstorfworkcom -l sfwcomm2 ):
        0514-040 Error initializing a device into the kernel.
Method error (/usr/lib/methods/cfgstorfworkcom -l sfwcomm3 ):
        0514-040 Error initializing a device into the kernel.
Method error (/usr/lib/methods/cfgemfscsi -l fscsi2 ):
        0514-061 Cannot find a child device.
Method error (/usr/lib/methods/cfgemfscsi -l fscsi3 ):
        0514-061 Cannot find a child device.
Method error (/usr/lib/methods/cfgstorfworkcom -l sfwcomm2 ):
        0514-040 Error initializing a device into the kernel.
Method error (/usr/lib/methods/cfgstorfworkcom -l sfwcomm3 ):
        0514-040 Error initializing a device into the kernel.
/root


root@lnimsrv1: # rmdev -dl en0
root@lnimsrv1: # rmdev -dl en1
root@lnimsrv1: # rmdev -dl en2
root@lnimsrv1: # rmdev -dl en3
root@lnimsrv1: # rmdev -dl en4
root@lnimsrv1: # rmdev -dl ent2
root@lnimsrv1: # rmdev -dl ent4 <--errored

root@lnimsrv1: # cfgmgr

root@lnimsrv1: # shutdown -Fr now

root@lnimsrv1: # lsdev -l en*
en0  Defined   02-00 Standard Ethernet Network Interface
en4  Defined   03-00 Standard Ethernet Network Interface
ent0 Available 02-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
ent4 Available 03-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)

root@lnimsrv1: # lsdev -Cc adapter
ent0    Available 02-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
ent4    Available 03-00 PCIe3 2 PORT 25/10/1 Gb NIC&ROCE SFP28 ADAPTER VF (b315161014101e06)
fcs0    Available 10-T0 Virtual Fibre Channel Client Adapter
fcs1    Available 11-T0 Virtual Fibre Channel Client Adapter
fcs2    Available 20-T0 Virtual Fibre Channel Client Adapter
fcs3    Available 21-T0 Virtual Fibre Channel Client Adapter
hdcrypt Available       Data encryption
pkcs11  Available       ACF/PKCS#11 Device
vsa0    Available       LPAR Virtual Serial Adapter
vscsi0  Defined         Virtual SCSI Client Adapter

------------------------------------------------------------------------------------------------------

APRIL 19, 2023

### QUICK WAY TO SORT THROUGH iFIXES that are unneeded / not required
[simsjo-a@cadminsrv01 AIX_iFixs_72_TL05_SP05]$ find . | grep -E 'IJ45245s5a|IJ44425s5b|IJ43869m5b|IJ43876s5a|IJ43877s5a|IJ45056m5a|IJ44559m5a' | grep -v -ie '.sig$'
./bind_fix22/IJ44425s5b.230214.epkg.Z
./kernel_fix5/IJ43869m5b.230216.epkg.Z
./kernel_fix5/IJ43876s5a.221212.epkg.Z
./kernel_fix5/IJ43877s5a.230123.epkg.Z
./librts_fix/IJ45245s5a.230322.epkg.Z
./libxml2_fix4/IJ45056m5a.230125.epkg.Z
./lpd_fix3/IJ44559m5a.221208.epkg.Z
[simsjo-a@cadminsrv01 AIX_iFixs_72_TL05_SP05]$ mkdir GOLD
mkdir: cannot create directory ‘GOLD’: Permission denied
[simsjo-a@cadminsrv01 AIX_iFixs_72_TL05_SP05]$ sudo mkdir GOLD
[simsjo-a@cadminsrv01 AIX_iFixs_72_TL05_SP05]$ find . | grep -E 'IJ45245s5a|IJ44425s5b|IJ43869m5b|IJ43876s5a|IJ43877s5a|IJ45056m5a|IJ44559m5a' | grep -v -ie '.sig$' | sudo xargs -n1 -I{} cp '{}' GOLD/ 
[simsjo-a@cadminsrv01 AIX_iFixs_72_TL05_SP05]$ ll GOLD/
total 22416
-rw-r----- 1 root root 10413104 Apr 19 15:27 IJ43869m5b.230216.epkg.Z
-rw-r----- 1 root root    97781 Apr 19 15:27 IJ43876s5a.221212.epkg.Z
-rw-r----- 1 root root   105391 Apr 19 15:27 IJ43877s5a.230123.epkg.Z
-rw-r----- 1 root root  5048597 Apr 19 15:27 IJ44425s5b.230214.epkg.Z
-rw-r----- 1 root root    35752 Apr 19 15:27 IJ44559m5a.221208.epkg.Z
-rw-r----- 1 root root  5363287 Apr 19 15:27 IJ45056m5a.230125.epkg.Z
-rw-r----- 1 root root  1879173 Apr 19 15:27 IJ45245s5a.230322.epkg.Z
[simsjo-a@cadminsrv01 AIX_iFixs_72_TL05_SP05]$ 

### NOTES FOR processing iFixes
sudo lslpp -Lcq > /fix/lslpp.txt
sudo emgr -lv3 > /fix/emgr.txt
printf "Please upload /fix/lslpp.txt and /fix/emgr.txt to: https://esupport.ibm.com/customercare/flrt/vc\n"


### EMGR Install on iFixs found in "AIX_iFixs_72_TL<<version>>_SP<<version>>"
ls -1 /fix/AIX_iFixs_72_TL05_SP05* | xargs -n1 -I{} emgr -X -e '{}'

https://aix.software.ibm.com/aix/ifixes/ij44799_with_security/

------------------------------------------------------------------------------------------------------

APRIL 21, 2023

Server-9009-42A-SN7802170-OC POWER 9 FRAME FW UPGRADE

CURRENT Firmware: VL940_FW940.10 (50)
UPGRADING TO Firmware: VL950_ 

omobpreprod1
omobprod1

SNOW TICKET: CHG0312620
https://dillards.service-now.com/nav_to.do?uri=change_request.do?sys_id=cabd59da979e2114aad13a500153af69

--------------

OSTORSRV1 / LSTORSRV1 AIX Maintenance (iFixs and Such)
SNOW TICKET: CHG0312619
https://dillards.service-now.com/nav_to.do?uri=change_request.do?sys_id=49771952979e2114aad13a500153afe0


--------------------------------------------------------------------------------------------------------

APRIL 24, 2023

List of todo's APR 24:

Changes: 
CHG0312637 & CHG0312638 for uninstalling fileset @ 12:30pm (DONE)
CHG0312635 for upgrading FW on frame ~ 1:00pm (DONE)
CHG0312619 for AIX Maintenance on lstorsrv1 ~ 2:00pm (DONE)
CHG0312635 for AIX Maintenance on liqa1 ~ 2:00pm (DONE)


#################################################

(Using LIEMRELAYSRV1B to present .iso of Frame FW Upgrade to HMC)

liemrelaysrv1b
01VL950_119_045

sftpuser:sftpgrp


[root@liemrelaysrv1b files]# rsync -av /mnt/ 01VL950_119_045/
sending incremental file list
./DONE
01VL950_119_045.dd.xml
01VL950_119_045.pd.sdd
01VL950_119_045.rpm
01VL950_119_045.tar.gz
01VL950_119_045.xml

sent 343,159,253 bytes  received 114 bytes  228,772,911.33 bytes/sec
total size is 343,075,154  speedup is 1.00
[root@liemrelaysrv1b files]# rsync -av /mnt/ 01VL950_119_045/
sending incremental file list

sent 129 bytes  received 12 bytes  282.00 bytes/sec
total size is 343,075,154  speedup is 2,433,157.12
[root@liemrelaysrv1b files]# ll
total 0
drwxr-xr-x 2 sftpuser sftpgrp 308 Oct 19  2020 01VL940_050_027
dr-xr-xr-x 2 root     root    150 Apr 24 04:44 01VL950_119_045
[root@liemrelaysrv1b files]# chown -R sftpuser:sftpgrp 01VL950_119_045/
[root@liemrelaysrv1b files]# ll
total 0
drwxr-xr-x 2 sftpuser sftpgrp 308 Oct 19  2020 01VL940_050_027
dr-xr-xr-x 2 sftpuser sftpgrp 150 Apr 24 04:44 01VL950_119_045
[root@liemrelaysrv1b files]# ll 01VL950_119_045/
total 335044
-r--r--r-- 1 sftpuser sftpgrp      8239 Feb 16 01:59 01VL950_119_045.dd.xml
-r--r--r-- 1 sftpuser sftpgrp      2688 Feb 16 01:59 01VL950_119_045.pd.sdd
-r--r--r-- 1 sftpuser sftpgrp 171247093 Feb 16 01:59 01VL950_119_045.rpm
-r--r--r-- 1 sftpuser sftpgrp 171814392 Feb 16 01:59 01VL950_119_045.tar.gz
-r--r--r-- 1 sftpuser sftpgrp      2742 Feb 16 01:59 01VL950_119_045.xml
[root@liemrelaysrv1b files]#

sftp sftpuser@liemrelaysrv1b
Login for SFTP user (Dillard1)

---

From the HMC
- Choose upgrade to new / current release
- Select SFTP as the method
- Supply sftpuser info + change directory to where the /mnt is pointed (this will be the current name of fw in that dir without any path info: e.g. just the name of the fw.iso in the directory field)
- Go through the motions of continuing in the menu until it starts the install (Approx 30min to finish)


##################################################################################################


(NEED TO ADD THE FOLLOWING TO PT2 OF AIX SCRIPT)

#---
#---Update installed RPM(s) to latest version available in repository
#---
sudo yum clean all
sudo yum check-update
sudo yum update
sudo yum check-update
sudo yum list installed
sudo rpm -q --whatprovides libssl.a\(libssl.so\)
sudo /usr/sbin/updtvpkg
sudo yum list installed
sudo rpm -q --whatprovides libssl.a\(libssl.so\)


#---
#---Verify that RSCT LPM/DLPAR HMC communication is functional
#---
sudo lsrsrc IBM.MCP
sudo /usr/sbin/rsct/bin/rmcdomainstatus -s ctrmc

#---
#---Verify all but hd5 that "LV STATE" is "open/syncd"
#---
sudo lsvg -o | sudo xargs -n1 lsvg -l | grep -ie "/" | grep -v -ie "open/syncd"

#---
#---Stop/Start BigFix Agent
#---
sudo /etc/rc.d/rc2.d/KBESClientd stop && sudo /etc/rc.d/rc2.d/KBESClientd start
sudo touch /var/opt/BESClient/__BESData/__Global/__fullReportNeeded


--------------------------------------------------------------------------------------------------------

APRIL 25, 2023


1.) Made changes to part 1 of the AIX OS Maintenance script to include yum updates
2.) Moved sym_link recreation script onto cadminsrv01:/miscdatashare/AIX_72-TL05-SP05_Maint
3.) oinodeperf/prod P9 frames are upgraded to latest FW


--------------------------------------------------------------------------------------------------------

APRIL 27, 2023


x86: (PASSWD NEEDING CHANGED)

cmcfsprod2
lcsmsrv1
lcvgatewayprod1
lcvsanvsaprod1
lcvsanvsaprod2
lcvsanvsaprod3
lcvsanvsaprod4
ljamfprod1
ocsmsrv1
ocvcommserveprod1
ocvgatewayprod1
ocvsanvsaprod1
ocvsanvsaprod3
ocvsanvsaprod4

-----------

TSM STILL RUNNING:

ctcfsprod2
cmcfsprod1
ctcfsprod1
lnimsrv1
ltcfsprod1
otcfsprod1
owtsmprod1
oopssrv1 
lutsmprod1


----------

Change for osolrperf/prod frame fw upgrades
CHG0312721

----------

# Something like this for testing if GPFS is running (Run in part2 script?):
#!/usr/bin/ksh93
if [ `sudo lsitab -a | grep -ie mmfs | wc -l` = 1 ]; then
        printf "--- GPFS is present ---\n"
        # Remove for init??
        exit 0
else
        printf "--- NO GPFS ---\n"
        exit 0
fi

---------

# List out of yum vs dnf and where things are pointed:

cat /opt/freeware/etc/yum/yum.conf | grep -ie "baseurl" | awk -F// \'{print $2}\' | cut -f1 -d"/"

dsh -M -w -f server.list "cat /opt/freeware/etc/yum/yum.conf | grep -ie "baseurl" | awk -F// '{print \$2}' | cut -f1 -d"/""


[simsjo-a@cadminsrv01 lists]$ cat dnf.list | wc -l
55
[simsjo-a@cadminsrv01 lists]$ cat yum_oredrepo1d.list | wc -l
146
[simsjo-a@cadminsrv01 lists]$ cat yum_lredrepo1d.list | wc -l
45

--------------------------------------------------------------------------------------------------------

May 02, 2023

Notes:

[harmojd-a@lxbastionsrv1 ~]$ sudo find /var/lib/containers/storage/ -name ctr.log | sudo xargs ls -lh
-rw------- 1 root root 112M Apr 20 15:09 /var/lib/containers/storage/overlay-containers/59a2b0aeaf6ab741029a6220feda367f72006472f62f743ecbd2f172b3805b12/userdata/ctr.log
-rw------- 1 root root  41K Apr 16 08:30 /var/lib/containers/storage/overlay-containers/ff5c8f45395ec7675bd3b804619a13a589658d7d4e94c4fa3a1ed861e04fc5bc/userdata/ctr.log

[harmojd-a@lxbastionsrv1 ~]$ sudo truncate --size 0 /var/lib/containers/storage/overlay-containers/59a2b0aeaf6ab741029a6220feda367f72006472f62f743ecbd2f172b3805b12/userdata/ctr.log
[harmojd-a@lxbastionsrv1 ~]$ sudo truncate --size 0 /var/lib/containers/storage/overlay-containers/ff5c8f45395ec7675bd3b804619a13a589658d7d4e94c4fa3a1ed861e04fc5bc/userdata/ctr.log

[harmojd-a@lxbastionsrv1 ~]$ sudo find /var/lib/containers/storage/ -name ctr.log | sudo xargs ls -lh
-rw------- 1 root root 0 Apr 20 15:14 /var/lib/containers/storage/overlay-containers/59a2b0aeaf6ab741029a6220feda367f72006472f62f743ecbd2f172b3805b12/userdata/ctr.log
-rw------- 1 root root 0 Apr 20 15:14 /var/lib/containers/storage/overlay-containers/ff5c8f45395ec7675bd3b804619a13a589658d7d4e94c4fa3a1ed861e04fc5bc/userdata/ctr.log
[harmojd-a@lxbastionsrv1 ~]$



sudo find /var/lib/docker/containers -name *-json.log | sudo xargs ls -lh
This will clear logs for container "pg10":
sudo truncate --size 0 $(docker inspect --format='{{.LogPath}}' pg10)
Clear all logs:
sudo find /var/lib/docker/containers -name *-json.log | xargs sudo truncate --size 0
Clear all logs RancherOS:
sudo find /var/lib/docker/containers -name *-json.log | xargs sudo truncate -s 0
Truncate podman logs:
find /var/lib/containers -name ctr.log | xargs sudo truncate --size 0


# Get cert details (Stefan)
[simsjo-a@cadminsrv01 ~]$ echo "" | openssl s_client -connect oredrepo1d.dillards.com:8140 | openssl x509 -noout -text

# Check container log size
sudo find /var/lib/containers/storage/ -name ctr.log | sudo xargs ls -lh 


--------------------------------------------------------------------------------------------------------

May 08, 2023

CHG0312949
Updating Power10 Firmware (Basement Mongo Frame)
Server-9786-22H-SN7845891-CORP
lpars:

cgendev1 (Not in use)
cgenprod1 (Not in use)

cdbadbsrv2 (Not in use)

cmdbdev2 (Mongo)
cmdbprod2 (Mongo)
cmdbqa2 (Mongo)

Going from: ML1020_fw1020.20 (89)
To: 1020.30 (97)



 time updlic -v -m Server-9786-22H-SN7845891-CORP -o a -t sys -l 01ML1020_097_079 -r mountpoint -d /home/hscroot/01ML1020_097_079;

--------------------------------------------------------------------------------------------------------

May 09, 2023

Server-9786-22H-SN7845861-LR
ldbadbsrv2
lmdbdev2
lmdbprod2
lmdbqa2


Server-9786-22H-SN784BFC1-OC
odbadbsrv2
omdbdev2
omdbprod2
omdbqa2

-------------------------------------------------

CHG0312974

Updating Power10 Firmware (O Side Mongo Frame)
Server-9786-22H-SN784BFC1-OC
lpars:
odbadbsrv2
omdbdev2
omdbprod2
omdbqa2


 time updlic -v -m Server-9786-22H-SN784BFC1-OC -o a -t sys -l 01ML1020_097_079 -r mountpoint -d /home/hscroot/01ML1020_097_079;


Going from: ML1020_fw1020.20 (89)
To: 1020.30 (97)

--

- Power down lpars on frame
- Stage new firmware locally so as to not use IBM Fix Central Site
- utilize UPDLIC command from 'l/o'pwrhmc1 to upgrade firmware on Server-9786-22H-SN784BFC1-OC

--

Bring lpars back up - sop

--

revert back down to 1020.20(89)

On the VIOS -> 

(Maintenance pack is staged on lpwrhmc1:/home/hscroot/... and on cadminsrv01:/fix/VIO...)

This as root:
emgr -l | grep -e '/' | awk '{print $3}' | xargs -n1 -I{} emgr -r -L {}

This as padmin:
updateios -accept -install -dev /fix/VIO_2023_Update_Pack/LATEST_VIOS_iFIXs_3.1.3.21
updateios -accept -dev /fix/VIO_2023_Update_Pack/openssl-1.1.2.2000
updateios -accept -dev /fix/VIO_2023_Update_Pack/OpenSSH_8.1.112.1201
updateios -accept -dev /fix/VIO_2023_Update_Pack/JAVA_LATEST_2023_CPU_SDK_JRE
updateios -remove Java7
updateios -remove Java7_64

This as root:
lslpp -l | grep -ie invscout
cd /fix/VIO_2023_Update_Pack/invscout_fix4;
installp -aXYd . invscout
lslpp -l | grep -ie invscout

This as root:
rpm -ihv --ignoreos /fix/VIO_2023_Update_Pack/df1000e314101406.00014000000057400007.aix.rpm
diag -d fcs0 -T download
diag -d fcs1 -T download
diag -d fcs2 -T download
diag -d fcs3 -T download

From the HMC (Run below command twice)
time updlic -v -m Server-9105-22A-SN78458B1-OC -o a -t sys -l 01ML1020_102_079 -r mountpoint -d /home/hscroot/01ML1020_102_079;

--------------------------------------------------------------------------------------------------------

May 11, 2023


### Fixing missing paths across the board when new paths are showing correct 
### Steps are very similar to migrating off of old storage - done in Jan 26th 2023

# roll backwards through output of sudo lscfg -l fcs* - upto fcs0
sudo rmdev -Rdl <<fcs*>> 
sudo cfgmgr
sudo rmdev -Rdl fcs0

# This will roll through and remove paths showing "none"
sudo lspv | grep -ie none | awk '{print $1}' | sudo xargs -n1 -I{} rmdev -Rdl {} 

sudo exportvg <<Volume Group>>
sudo exportvg <<Volume Group>>
sudo exportvg <<Volume Group>>
sudo exportvg <<Volume Group>>
sudo exportvg <<Volume Group>>

sudo importvg -y <<Volume Group>> <<hdisk>>
sudo importvg -y <<Volume Group>> <<hdisk>>
sudo importvg -y <<Volume Group>> <<hdisk>>
sudo importvg -y <<Volume Group>> <<hdisk>>
sudo importvg -y <<Volume Group>> <<hdisk>>

for i in {0..29}; do /opt/freeware/bin/echo hdisk${i} $(lsattr -E -a lun_id -l hdisk${i}; bootinfo -s hdisk${i}); done


--------------------------------------------------------------------------------------------------------

May 12, 2023

Notes: FLRTVC reporting wrong information on iFixes (Needed to reach out to FLRTVC Dev Group w/ IBM)

odmprod1b & bb
oiprod1,2,3

3.1.3.21    IJ46051s2a.230323.epkg.Z  key_w_fix

            VIOS Level APAR    Availability  SP        KEY
            -----------------------------------------------------
            3.1.2      IJ46110 **            3.1.2.60  key_w_apar
            3.1.3      IJ46051 **            3.1.3.40  key_w_apar
            3.1.4      IJ45245 **            3.1.4.20  key_w_apar

FLRTVC is reporting wrong for IJ45245 and should be "IJ46051"

3.1.3.21    IJ42159s4a.221017.epkg.Z  key_w_fix  NFS

            VIOS Level APAR    Availability  SP        KEY         PRODUCT(S)
            -----------------------------------------------------------------
            3.1.2      IJ43674 **            3.1.2.50  key_w_apar  NFS
            3.1.3      IJ42159 **            3.1.3.30  key_w_apar  NFS

FLRTVC is reporting wrong for IJ43674 and should be "IJ42159"

Relevant to: IBM TICKET TS012961947

--------------------------------------------------------------------------------------------------------

May 16, 2023


/opt/freeware/bin/echo -n \$(oslevel -s; rpm -q bash); echo

[FIX THESE - FIREWALL DNF]
lrsvdbprod1: 7200-05-05-2246 bash-5.1.4-2.ppc
lrsvdbqa1: 7200-05-05-2246 bash-5.1.4-2.ppc
oepubdbqa1: 7200-05-05-2246 bash-5.1.4-2.ppc

lrsvdbprod1 (172.16.30.136)
lrsvdbqa1 (172.16.7.209)
oepubdbqa1 (172.16.7.234)


/IBMDataStage/ASBNode/CognitiveDesignerEngine/stopCognitiveDesignerServer.sh

oedw11isprod1 (GPFS)
oedw11dbprod1 (GPFS)

- Note: mob prod and preprod seq b/bb firewall hmc issue
subnets (176.16.1.x and 172.16.111.x)


--------------------------------------------------------------------------------------------------------

May 29, 2023

[FW AND OS]
[First]
lixsprod1: 7200-05-02-2114
liprod1: 7200-05-02-2114 - Jesse (DONE)
linodeprod1: 7200-05-02-2114 - Jesse (DONE)

[Second]
oinodeprod1: 7200-05-02-2114
linodeprod2: 7200-05-02-2114

[AIX OS ONLY] - Jack
lgeotaxprod1: 7200-05-02-2114 (DONE)
lgeotaxprod2: 7200-05-02-2114 (DONE)
ogeotaxprod1: 7200-05-02-2114 (DONE)
ogeotaxprod2: 7200-05-02-2114 (DONE)

[AIX OS ONLY] - Newsom (ALL DONE)
listg1: 7200-05-02-2114
lisolrrepstg1: 7200-05-02-2114
linodestg1: 7200-05-02-2114
lisolrstg1: 7200-05-02-2114


oistg1: 7200-05-02-2114
oisolrstg1: 7200-05-02-2114
oinodestg1: 7200-05-02-2114


lidbstg1: 7200-05-02-2114 - Newsom (DONE)

oidbstg1: 7200-05-02-2114

libldprod1: 7200-05-02-2114
oibldprod1: 7200-05-02-2114


[ NOT DONE ]
oinodeprod1: 7200-05-02-2114
linodeprod2: 7200-05-02-2114
oidbstg1: 7200-05-02-2114
libldprod1: 7200-05-02-2114
oibldprod1: 7200-05-02-2114
oistg1: 7200-05-02-2114
oisolrstg1: 7200-05-02-2114
oinodestg1: 7200-05-02-2114
lixsprod1: 7200-05-02-2114

--------------------------------------------------------------------------------------------------------

May 31, 2023

-- all lpars on frame (Server-9105-22A-SN7845901-LR) --

ldmdev1d
ldmqa1d
linpdev1
lndev1mig
ledev1mig
lrsvdev1mig
lsdev1
lnqa1mig
leqa1mig
lrsvqa1mig
lsqa1
linpqa1
ledw11dmdev1
ledw11dbdev1
ledw11isdev1
lebi11dev1
lrsvperf1
ldmprod1d
linpprod1
lnprod1mig
lnprod2mig
lrsvprod1mig
lsprod1
ledw11dbprod1
ledw11dmprod1
ledw11isprod1
lisolrrepstg1
lapidev1 (LINUX)
lapiqa1 (LINUX)
ledev1 (LINUX)
leqa1 (LINUX)
lsptmdev1 (LINUX)
lsptmiamclnt1 (LINUX)
lspuidev1 (LINUX)
lspuiiamclnt1 (LINUX)
leprod1 (LINUX)
lapiprod1 (LINUX)

-- Maintenance being done --

[AIX PROD - 1:30p]
ledw11dbprod1    (GPFS) (DONE)       
ledw11dmprod1    (DONE)
ledw11isprod1    (GPFS) (DONE)

[AIX PROD - 10a]
ldmprod1d        (DONE)
linpprod1        (GPFS) (DONE)
lnprod1mig       (GPFS) (DONE)
lnprod2mig       (GPFS) (DONE)
lrsvprod1mig     (GPFS) (DONE)
lsprod1          (GPFS) (DONE)


--------------------------------------------------------------------------------------------------------

June 2, 2023

CHG0313566
[hscroot@opwrhmc1 ~] $ for i in $(cat ocp_frames.list); do echo $i; lssyscfg -m $i -r lpar -F name state; done

Server-9080-HEX-SN7870AF8-OC
worker3.opprod1 "Not Activated"
master3.opprod1 "Not Activated"
worker3.opperf1 "Not Activated"
master3.opperf1 "Not Activated"
worker3.opdev1 "Not Activated"
master3.opdev1 "Not Activated"
worker3.opsrv1 Running
master3.opsrv1 Running
oocpcfsprod3 "Not Activated"
oocpcfsdev3 "Not Activated"
ovioprod2-7870AF8 Running
ovioprod1-7870AF8 Running

Server-9080-HEX-SN78703D8-OC
worker1.opprod1 "Not Activated"
master1.opprod1 "Not Activated"
worker1.opperf1 "Not Activated"
master1.opperf1 "Not Activated"
worker1.opdev1 "Not Activated"
master1.opdev1 "Not Activated"
worker1.opsrv1 Running
master1.opsrv1 Running
oocpcfsprod1 "Not Activated"
oocpcfsdev1 "Not Activated"
ovioprod2-78703D8 Running
ovioprod1-78703D8 Running

Server-9080-HEX-SN78704A8-OC
worker2.opprod1 "Not Activated"
master2.opprod1 "Not Activated"
worker2.opperf1 "Not Activated"
master2.opperf1 "Not Activated"
worker2.opdev1 "Not Activated"
master2.opdev1 "Not Activated"
worker2.opsrv1 Running
master2.opsrv1 Running
oocpcfsprod2 "Not Activated"
oocpcfsdev2 "Not Activated"
ovioprod2-78704A8 Running
ovioprod1-78704A8 Running


[ VIOS Needing Updates ]
title: ovioprod2-7870AF8;; command: ssh padmin@ovioprod2-7870AF8 (DONE)
title: ovioprod1-7870AF8;; command: ssh padmin@ovioprod1-7870AF8 (DONE)
title: ovioprod2-78703D8;; command: ssh padmin@ovioprod2-78703D8 (DONE)
title: ovioprod1-78703D8;; command: ssh padmin@ovioprod1-78703D8 (DONE)
title: ovioprod2-78704A8;; command: ssh padmin@ovioprod2-78704A8 (DONE)
title: ovioprod1-78704A8;; command: ssh padmin@ovioprod1-78704A8 (DONE)


Server-9080-HEX-SN7870AF8-OC (DONE)
Server-9080-HEX-SN78704A8-OC (DONE)
Server-9080-HEX-SN78703D8-OC (DONE)


time updlic -v -m Server-9080-HEX-SN7870AF8-OC -o a -t sys -l 01MH1030_058_038 -r mountpoint -d /home/hscroot/01MH1030_058_038;

time updlic -v -m Server-9080-HEX-SN78704A8-OC -o a -t sys -l 01MH1030_058_038 -r mountpoint -d /home/hscroot/01MH1030_058_038; 


--------------------------------------------------------------------------------------------------------


June 5th 2023

Server-9105-22A-SN7847B41-CORP #P10 Firmware
Server-9105-22A-SN7847B31-CORP #P10 Firmware


time updlic -v -m Server-9105-22A-SN7847B31-CORP -o a -t sys -l 01ML1020_102_079 -r mountpoint -d /home/hscroot/01ML1020_102_079; 


time updlic -v -m Server-9105-22A-SN7847B41-CORP -o a -t sys -l 01ML1020_102_079 -r mountpoint -d /home/hscroot/01ML1020_102_079;



for i in $(cat hmc.list); do ssh $i "for j in \$(lssyscfg -r sys -F name); do echo \$j; lslic -m \$j -F ecnumber activated_level installed_level installed_spname;done";done

---

ssh padmin@cvioprod1-7847B31

---

hscroot@cpwrhmc1:~> installios -d /home/hscroot/VIOS_3.1.3.21_Flash.iso -i 10.40.232.36 -g 10.40.232.1 -S 255.255.255.0 -m 9a:73:f0:79:9a:01 -s Server-9105-22A-SN7847B31-CORP -p cvioprod2-7847B31 -r default_profile -R 3.1.3.21 -C

10.40.232/24 (Basement VLAN 233)

GW: 10.40.232.1
SM: 255.255.255.0

G2G : cvioprod1-7847b31 (10.40.232.35)
G2G : cvioprod1-7847b41 (10.40.232.37)
G2G : cvioprod2-7847b31 (10.40.232.36)
G2G : cvioprod2-7847b41 (10.40.232.38)



--------------------------------------------------------------------------------------------------------

June 6th 2023


# Creating NIB Link Aggregation
# DONT USE
mkvdev -lnagg entX -attr backup_adapter=entY
# Example
# DONT USE
mkvdev -lnagg ent0 -attr backup_adapter=ent1

# THE BELOW WORKS
# Get sriov link aggregation speed
lshwres -r sriov -m <<MANAGED_SYSTEM>> --rsubtype physport --level roce


### (GET INFO -> REMOVE -> CFGMGR -> RECREATE)
### Get ipaddr of host + gateway prior to removing en*/et*/ent*

ipaddr=`ifconfig -a | grep -ie inet | awk 'NR==1{print $2}'`
echo $ipaddr

gateway=`lsconf | grep -ie gateway | awk '{print $2}'`
echo $gateway

---

###
### Remove devices/adapters/interfaces en*/et*/ent*

lsdev -l e[nt]*
for i in $(lsdev -Cc if | grep -v lo | awk '{print $1}')
do
     echo $i
     rmdev -dl $i
done

for i in $(lsdev -Cc adapter | grep '^ent' | awk '{print $1}' | sort -r)
do
     echo $i
     rmdev -dl $i
done

---

(cfgmgr)

###
### make link aggregate with ent0/ent1 + make tcpip config using first steps info

mkdev -c adapter -s pseudo -t ibm_ech -a adapter_names="ent0" -a backup_adapter="ent1" -a noloss_failover="no" -a netaddr=$gateway && /usr/lib/methods/defif
mktcpip -h $(hostname) -a $ipaddr -m"255.255.255.0" -i"en2" -g $gateway -C"0" -A"no" -t"N/A" -s

--------------------------------------------------------------------------------------------------------


June 7th, 2023

CHG0313631

[hscroot@cpwrhmc1 ~] $ lssyscfg -m Server-9009-22A-SN7884390-CORP -r lpar -F name
cmdbprod3_decomm
cmdbqa3_decomm
cmdbdev3_decomm
cdbadbsrv3_decomm
cvioprod2-7884390
cvioprod1-7884390
[hscroot@cpwrhmc1 ~] $ 



Current Level: 01VL940_50_10
Going to:          01VL950_124_045


--------------------------------------------------------------------------------------------------------


June 19th, 2023

#Linux watch on cpu utilization
watch -n1 -c 'ps -ef pid,ppid,%mem,%cpu,cmd --sort=-%cpu | head'

---

# Moving basement lpars from p8 to p9/10

Server-8284-22A-SN214886V-CORP
cidbprod1 "Not Activated"
cidbstg1 "Not Activated"
cmcfsprod1 Running
cmcfsdev1 Running
cvioprod2-214886V Running
cvioprod1-214886V Running

Server-8284-22A-SN214887V-CORP
cgenusprod1 Running                                     --> Server-9009-22A-SN7884390-CORP
cgenusdev1 Running                                      --> Server-9009-22A-SN7884390-CORP
cgenprod1_decom "Not Activated"
cgendev1_decom "Not Activated"
ctcfsprod1 Running
caicfsprod1 Running
cvioprod2-214887V Running
cvioprod1-214887V Running


FROM --> TO


Server-9105-22A-SN7847B31-CORP
cvioprod2-7847B31
cvioprod1-7847B31

Server-9105-22A-SN7847B41-CORP
cvioprod1-7847B41
cvioprod2-7847B41

Server-9009-22A-SN7884390-CORP (*)
cvioprod2-7884390
cvioprod1-7884390

Server-9786-22H-SN7845891-CORP
cgenprod1
cgendev1
cmdbprod2
cmdbqa2
cmdbdev2
cdbadbsrv2
cvioprod2-7845891
cvioprod1-7845891


---


Server-8284-22A-SN214886V-CORP
01SV860 205 205 FW860.70

Server-8284-22A-SN214887V-CORP
01SV860 205 205 FW860.70

Server-9105-22A-SN7847B31-CORP
01ML1020 102 102 fw1020.30

Server-9105-22A-SN7847B41-CORP
01ML1020 102 102 fw1020.30

Server-9009-22A-SN7884390-CORP
01VL950 131 131 FW950.80

Server-9786-22H-SN7845891-CORP
01ML1020 102 097 fw1020.30


--------------------------------------------------------------------------------------------------------


June 26th, 2023



slush frames + basement mongo (Today)
o side of Server-9009-42A-SN78019C0-LR (Next week)

---

simsjo-a@cpwrhmc1:~> lslic -m Server-9009-22A-SN7884390-CORP -F ecnumber activated_level installed_level installed_spname
01VL950 131 131 FW950.80

---

simsjo-a@laixhmc1d:~> lslic -m Server-9009-42A-SN7801B00-LR -F ecnumber activated_level installed_level installed_spname
01VL950 124 124 FW950.71

simsjo-a@laixhmc1d:~> lssyscfg -m Server-9009-42A-SN7801B00-LR -r lpar -F name state
lurbatchdev1 Running
lurbatchprod1 Running
lgenusprod1 Running
lgenusdev1 Running
lufcpoc2 Running
lvioprod2-7801B00 Running
lvioprod1-7801B00 Running

---

simsjo-a@oaixhmc1d:~> lslic -m Server-9009-42A-SN7801B80-OC -F ecnumber activated_level installed_level installed_spname
01VL950 124 124 FW950.71

simsjo-a@oaixhmc1d:~> lssyscfg -m Server-9009-42A-SN7801B80-OC -r lpar -F name state
ovioprod2-7801B80 Running
ovioprod1-7801B80 Running
ogenusdev1 Running
ourbatchdev1 Running
ogenusprod1 Running
ourbatchprod1 Running

---

simsjo-a@oaixhmc1d:~> lslic -m Server-9009-42A-SN78019C0-LR -F ecnumber activated_level installed_level installed_spname
01VL950 124 124 FW950.71

--------------------------------------------------------------------------------------------------------


June 27th, 2023

#ULIMITS change for allocating more resources
sudo chuser cpu='-1' fsize='-1' data='-1' stack='-1' rss='-1' nofiles='-1' threads='-1' nproc='-1' fsize_hard='-1' data_hard='-1' stack_hard='-1' rss_hard='-1' nofiles_hard='-1' threads_hard='-1' nproc_hard='-1' maxage=0 fndact


--------------------------------------------------------------------------------------------------------


July 5th, 2023


# For replacing value in /var/ossec/var/run/wazuh-remoted.state to fix gam alert on that value not being 0
sed -e "s/discarded_count='[0-9]*'/discarded_count='0'/g" wazuh-remoted.state


--------------------------------------------------------------------------------------------------------


July 17th, 2023

[root@lfndftdev01 ~]# vgs
  VG     #PV #LV #SN Attr   VSize   VFree 
  rootvg   1  11   0 wz--n- <71.00g 29.38g

[root@lfndftdev01 ~]# lvs
LV         VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
dataloadlv rootvg -wi-a----- 500.00m                                                    
fixlv      rootvg -wi-ao----  10.00g                                                    
homelv     rootvg -wi-ao---- 128.00m                                                    
locallv    rootvg -wi-ao----   2.00g                                                    
logslv     rootvg -wi-ao----   4.00g                                                    
optlv      rootvg -wi-ao----   8.00g                                                    
slashlv    rootvg -wi-ao----   1.00g                                                    
swaplv     rootvg -wi-ao----   2.00g                                                    
tmplv      rootvg -wi-ao----   1.00g                                                    
usrlv      rootvg -wi-ao----   5.00g                                                    
varlv      rootvg -wi-ao----   8.00g

[root@lfndftdev01 ~]# free -m
              total        used        free      shared  buff/cache   available
Mem:           9752        1242        6504         303        2004        7798
Swap:          2047         858        1189

[root@lfndftdev01 ~]# cat /etc/fstab | grep -ie swap
/dev/mapper/rootvg-swaplv swap                    swap    defaults        0 0

[root@lfndftdev01 ~]# cat /proc/sys/vm/swappiness
1

---

[root@lfndftdev01 ~]# swapoff -v /dev/mapper/rootvg-swaplv
swapoff /dev/mapper/rootvg-swaplv

[root@lfndftdev01 ~]# free -m
              total        used        free      shared  buff/cache   available
Mem:           9752        1742        5692         615        2317        6987
Swap:             0           0           0

[root@lfndftdev01 ~]# lvresize /dev/mapper/rootvg-swaplv -L +2G

[root@lfndftdev01 ~]# mkswap /dev/mapper/rootvg-swaplv
mkswap: /dev/mapper/rootvg-swaplv: warning: wiping old swap signature.
Setting up swapspace version 1, size = 4 GiB (4294963200 bytes)
no label, UUID=26c4ac49-4e69-4058-a5f9-0f65c265114a

[root@lfndftdev01 ~]# swapon -v /dev/mapper/rootvg-swaplv

[root@lfndftdev01 ~]# free -m
              total        used        free      shared  buff/cache   available
Mem:           9752        1738        5691         615        2322        6991
Swap:          4095           0        4095


--------------------------------------------------------------------------------------------------------


July 21st, 2023


Oaixhmc1d:
Managed System Server-8286-41A-SN21834AV: Error 
FSP Primary 10.1.255.2: Online 
FSP Secondary 10.1.255.17: Offline 

Lpwrhmc1:
Managed System Server-8286-41A-SN21834AV: Power Off 
FSP 10.0.0.79: Online 

Hello Jack, 
        This is a hardware issue, not a problem that the HMC software team address. You really need to open case with or re-open your existing case with IBM hardware support. 
        From what I found you can check to make sure the managed system is showing correct enclosure type details, for example physical adapters, memory, processors. etc.
        Login to ASMI and correct the details of enclosure under VPD.  

Note: Unfortunately, there is nothing additional we can do to assist you with this issue from the HMC Software team, You will have to reach back out to IBM Hardware for assistance.

Thank you for using IBM services,

Elmer

--------------------------------------------------------------------------------------------------------


August 03, 2023



cvioprod1-7884390

drwxrwxrwx    5 root     system         4096 Aug 03 13:45 ..
-rw-r-----    1 padmin   staff         97593 Aug 03 13:45 IJ43876s4a.221017.epkg.Z
-rw-r--r--    1 padmin   staff      11338762 Aug 03 13:45 IJ44047m4e.230505.VIOS3.1.3.30.epkg.Z
-rw-r-----    1 padmin   staff       4680621 Aug 03 13:45 IJ44424s3a.230404.epkg.Z
-rw-r-----    1 padmin   staff       5360295 Aug 03 13:45 IJ45058m4b.230405.epkg.Z
-rw-r-----    1 padmin   staff       1883411 Aug 03 13:45 IJ46051s3a.230323.epkg.Z
-rw-r-----    1 padmin   staff        105317 Aug 03 13:45 IJ46068s3a.230404.epkg.Z
drwxr-xr-x    2 padmin   staff           256 Aug 03 13:45 tar_files
drwxr-xr-x    6 padmin   staff           256 Aug 03 13:45 unpacked_tars
drwxr-xr-x    4 padmin   staff          4096 Aug 03 13:58 .
# pwd
/fix/test_fixes

--------------------------------------------------------------------

IJ43876s4a          INSTALL PREVIEW        SUCCESS            
IJ44047m4e          INSTALL PREVIEW        SUCCESS           
IJ44424s3a          INSTALL PREVIEW        SUCCESS           
IJ45058m4b          INSTALL PREVIEW        SUCCESS           
IJ46051s3a          INSTALL PREVIEW        SUCCESS           
IJ46068s3a          INSTALL PREVIEW        SUCCESS      

--------------------------------------------------------------------

ID  STATE LABEL      INSTALL TIME      UPDATED BY ABSTRACT
=== ===== ========== ================= ========== ======================================
1   *Q*   IJ43876s4a 08/03/23 13:58:18            IJ43876 POTENTIAL SECURITY ISSUE      
2   *Q*   IJ44047m4e 08/03/23 13:58:27            multi ifix for APAR IJ44047           
3    S    IJ44424s3a 08/03/23 13:58:41            IJ44424 POTENTIAL SECURITY ISSUE      
4    S    IJ45058m4b 08/03/23 13:58:49            IJ45058 POTENTIAL SECURITY ISSUE      
5    S    IJ46051s3a 08/03/23 13:58:57            IJ46051 POTENTIAL SECURITY ISSUE      
6   *Q*   IJ46068s3a 08/03/23 13:59:08            IJ46068 POTENTIAL SECURITY ISSUE


--------------------------------------------------------------------------------------------------------


August 07, 2023

# Command relating to docker images on lpbastionsrv1
lpbastionsrv1
sudo su - 
cd /sharedocp/Dockerfiles/ddsbi-dockerfiles/
podman images --sort repository
podman rmi -a

--
AAwQYw0wW5u6EChGvph0
--

--------------------------------------------------------------------------------------------------------


August 16, 2023

# ebi edw requiring gpfs updates

GPFS 5.1.2.12 Update

The following hosts will have GPFS updated from 5.1.2.10 to 5.1.2.12 :

(edw dev)
ledw11isdev1   gpfs.base 5.1.2.10
oedw11isdev1   gpfs.base 5.1.2.10
ledw11dbdev1   gpfs.base 5.1.2.10
oedw11dbdev1   gpfs.base 5.1.2.10

(edw prod)
ledw11isprod1  gpfs.base 5.1.2.10
oedw11isprod1  gpfs.base 5.1.2.10
ledw11dbprod1  gpfs.base 5.1.2.10 
oedw11dbprod1  gpfs.base 5.1.2.10 

(ebi dev)
lebi11dev1     gpfs.base 5.1.2.10
oebi11dev1     gpfs.base 5.1.2.10
lebi11dbdev1   gpfs.base 5.1.2.10 
oebi11dbdev1   gpfs.base 5.1.2.10 

(ebi prod)
lebi11prod1    gpfs.base 5.1.2.10 
oebi11prod1    gpfs.base 5.1.2.10
lebi11dbprod1  gpfs.base 5.1.2.10 
oebi11dbprod1  gpfs.base 5.1.2.10 
 
---
Dev servers can be done during the day, one after the other once the first has been tested (Planned for Tuesday Aug 22nd)

* prod servers have to be done on different days
Wednesday (Aug 23rd) for the (O side)
Thursday  (Aug 24th) for the (L Side)

edw11 servers can come down in the afternoon
ebi11 servers will be down all day on the day they are upgraded


--------------------------------------------------------------------------------------------------------


August 18, 2023

# compressing and sending a dir inline/at the same time to/from a remote source
tar cvfz - <compressing_dir> | ssh cadminsrv01 "cat > /miscdatashare/<remote_dest_dir>"
ssh <remote_host> "tar -cvfs - <compressing_dir>" > /local_dest_dir/file_name.tar


# Notes about AIX iNodes and filesystem usage / file discriptors

for i in $(fuser -dV /var 2>/dev/null); do ps -ef | grep -ie $i; done

for i in $(ps -ef | grep -ie "[s]ysmon" | awk '{print $2}'); do echo $i; procfiles $i; done

# Grab values after "dev:"
# cd into /dev
# ls -l | grep -ie "#, *#"
# Grab last col value - hd#
# lsfs | grep -ie "hd#..."
# Grab inode from procfiles command on the /dev picked
# istat <inode> </dir_from_abv_cmd>


--------------------------------------------------------------------------------------------------------


September 22, 2023



/usr/sbin/install_all_updates -Y -cd /fix/AIX_Maint_Sept_Latest/openssl-1.1.2.2200
emgr -X -e /fix/AIX_Maint_Sept_Latest/openssh_fix15/38408m9b.230811.epkg.Z



.1) alt_disk
.1a) Reboot

.2) Run /fix/AIX_72-TL05_SP06_Maint/AIX_MAINT_SCRIPTS/AIX_maint_prt1.ksh
.3) Run /fix/AIX_72-TL05_SP06_Maint/JAVA_QUICK_FIX_SEP/install_update.sh
.4) Run sudo /usr/sbin/install_all_updates -Y -cd /fix/AIX_Maint_Sept_Latest/openssl-1.1.2.2200

.5) Reboot

.6) Run /fix/AIX_72-TL05_SP06_Maint/AIX_MAINT_SCRIPTS/AIX_maint_prt2.ksh
.7) Reboot

* GPFS if required


for i in $(lssyscfg -r sys -F name | grep -iv bmc); do echo $i; lssyscfg -m $i -r lpar -F name | grep -ie iprod; done

---

Server-9009-42A-SN78028C0-OC
Server-9009-42A-SN78028D0-OC
Server-9009-42A-SN78028E0-OC
Server-9009-42A-SN78028F0-OC
Server-9009-42A-SN7802900-OC

Server-9009-42A-SN78028C0-OC
FW950.71 124
Server-9009-42A-SN78028D0-OC
FW950.71 124
Server-9009-42A-SN78028E0-OC
FW950.71 124
Server-9009-42A-SN78028F0-OC
FW950.71 124
Server-9009-42A-SN7802900-OC
FW950.71 124

sudo su - 
mount -o loop /miscdatashare/H76379632_01VL950_131_045.iso /mnt/ISO1

--------------------------------------------------------------------------------------------------------


September 25, 2023


updlic -m Server-9009-42A-SN78028F0-OC -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v
updlic -m Server-9009-42A-SN7802900-OC -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v

for i in {1..1320}; do clear; echo $i; lslic -m Server-9009-42A-SN7802900-OC -F activated_spname, accepted_spname;  sleep 1; done

updlic -m Server-9009-42A-SN78028F0-OC -o c -t sys -v
updlic -m Server-9009-42A-SN7802900-OC -o c -t sys -v

# Update LIC
updlic -m <MANAGED_SYS> -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045

# Ensure LIC is updating
for i in {1..1320}; do clear; echo $i; lslic -m <MANAGED_SYS> -F activated_spname, accepted_spname;  sleep 1; done

# Accept LIC
updlic -m <MANAGED_SYS> -o c -t sys -v

--------------------------------------------------------------------------------------------------------


October 5th, 2023


sudo /usr/sbin/install_all_updates -Y -cd /fix/perl_8.28.1.8
- Failed from openssl version not being in support for update

---

Server-9105-22A-SN7845881-LR (WAITING FOR ML PROCESS TO FINISH)
Server-9105-22A-SN78456D1-OC (DONE)

---

Notes on all update commands ran against Power frames so far:
awk '{print $1}' server.list | while read SERVER
do
rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint ${SERVER}:/fix/
rsync -av /miscdatashare/AIX_Maint_Sept_Latest  ${SERVER}:/fix/
done

---

.1) alt_disk
.1a) Reboot

.2) Run /fix/AIX_72-TL05_SP06_Maint/AIX_MAINT_SCRIPTS/AIX_maint_prt1.ksh
.3) Run /fix/AIX_72-TL05_SP06_Maint/JAVA_QUICK_FIX_SEP/install_update.sh
.4) Run sudo /usr/sbin/install_all_updates -Y -cd /fix/AIX_Maint_Sept_Latest/openssl-1.1.2.2200

.5) Reboot

.6) Run /fix/AIX_72-TL05_SP06_Maint/AIX_MAINT_SCRIPTS/AIX_maint_prt2.ksh
.7) Reboot

---

invscout / fix microcode

---

# Update LIC
updlic -m <MANAGED_SYS> -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045

# Ensure LIC is updating
for i in {1..1320}; do clear; echo $i; lslic -m <MANAGED_SYS> -F activated_spname, accepted_spname;  sleep 1; done

# Accept LIC
updlic -m <MANAGED_SYS> -o c -t sys -v

---

Server-9009-42A-SN78028A0-LR
liperf4 Running (DONE)
liprod4 Running

Server-9009-42A-SN78028B0-LR
liperf5 Running (DONE)
liprod5 Running

updlic -m Server-9009-42A-SN78028A0-LR -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v

updlic -m Server-9009-42A-SN78028B0-LR -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v


for i in {1..1320}; do clear; echo $i; lslic -m Server-9009-42A-SN78028A0-LR -F activated_spname, accepted_spname;  sleep 1; done


updlic -m Server-9009-42A-SN78028A0-LR -o c -t sys -v
updlic -m Server-9009-42A-SN78028B0-LR -o c -t sys -v

--

updlic -m Server-9009-42A-SN7802860-LR -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v
updlic -m Server-9009-42A-SN7802860-LR -o c -t sys -v

--

updlic -m Server-9009-42A-SN7802870-LR -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v
updlic -m Server-9009-42A-SN7802890-LR -o a -t sys -l latest -r mountpoint -d /home/hscroot/01VL950_131_045 -v

updlic -m Server-9009-42A-SN7802870-LR -o c -t sys -v
updlic -m Server-9009-42A-SN7802890-LR -o c -t sys -v

--

updlic -m Server-9105-22A-SN7845911-LR -o a -t sys -l latest -r mountpoint -d /home/hscroot/01ML1030_060_026 -v
updlic -m Server-9105-22A-SN7845911-LR -o c -t sys -v



--------------------------------------------------------------------------------------------------------


December 11, 2023 (This is when I put these notes here but are not when the notes are from)



JAVA_UPDATE_PATH=$(ls -ld /fix/java_updates/install/* | grep -ie "java" | awk '{print $9}');
JAVA_UPDATE_PATH=$(ls -ld /fix/java_updates/install/* | grep -ie "java" | awk '{print $9}');

ls $JAVA_UPDATE_PATH | xargs -I{} sudo installp -aXYd $JAVA_UPDATE_PATH {}

ls $JAVA_UPDATE_PATH | xargs -n1 -I{} echo {}

ls $JAVA_UPDATE_PATH | xargs -n1 -I{} sudo /usr/sbin/install_all_updates -Y -cd {}

---

for server in $(cat ~/server.list)
do
  rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint $server:/fix
  rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint $server:/fix
done


rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint oidbperf1:/fix
rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint lidbperf1:/fix

rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint lixsperf1:/fix
rsync -av /miscdatashare/AIX_72-TL05_SP06_Maint oixsperf1:/fix

sudo rpm -ihv --ignoreos --force /fix/AIX_72-TL05_SP06_Maint/adapter_code_udpates/fc_adapter_microcode/df1000f114100104.210313.aix.rpm

sudo rpm -ihv --ignoreos --force /fix/AIX_72-TL05_SP06_Maint/adapter_code_udpates/fc_adapter_microcode/df1000f114108a03.210313.aix.rpm


sudo rpm -ihv --ignoreos --force /fix/AIX_72-TL05_SP06_Maint/adapter_code_udpates/siss_adapter_microcode/pci.1014034A.51-19512c00-1.Linux.noarch.rpm


for i in {0..3}; do diag -d fcs$i -T download -c; done
diag -d ent0 -T download
diag -d ent4 -T download



--------------------------------------------------------------------------------------------------------


December 15, 2023


Ok sweet looking forward to having it. I was trying to run a mailx step on the gitlab-builder image and ran into an error. 

$ echo "Approval has been requested for ${CI_PROJECT_NAME}. For more details: ${CI_PROJECT_URL}/pipelines/${CI_PIPELINE_ID}" | mailx -s "Approval Requested for ${CI_PROJECT_NAME}" -r team-softwareadmin@dillards.com enterprisearchitecture@dillards.com
s-nail: Cannot start /usr/sbin/sendmail: executable not found (adjust *mta* variable)
/home/wasusr/dead.letter 10/429
s-nail: ... message not sent


set -x
RECIPIENTS=jack.sims@dillards.com;
echo "TEST" | mailx -r unixadmin@dillards.com -s "Test mail send from ubi9 container image" jack.sims@dillards.com


DATE="$(date +'%Y-%m')"
podman build --no-cache --build-arg ARCH=$(uname -m) -t localhost/jack-test-gitlab_mail:${DATE} -f jack-test-gitlab_mail.dockerfile-TEST

---

mydomain = dillards.com
relayhost = smtp.dillards.com
masquerade_domains = dillards.com

#mydomain = domain.tld
mydomain = dillards.com

#relayhost = $mydomain
relayhost = smtp.$mydomain

masquerade_domains = dillards.com


---


/usr/sbin/postfix start

echo -e "Subject:TEST SUBJECT \n\nTEST BODY" | /usr/lib/sendmail -F unixadmin@dillards.com -t "jack.sims@dillards.com"


---


ENTRYPOINT /usr/sbin/postfix start && /bin/bash


FROM debian:8

RUN useradd -ms /bin/bash exemple

COPY ./entrypoint.sh /root/entrypoint.sh

ENTRYPOINT "/root/entrypoint.sh"

---

#!/bin/bash

/usr/sbin/postfix start

su - wasusr

# needed to run parameters CMD
$@

---

Files used in build:

main.cf <<-- Overwrites containers main.cf for postfix configuration (mydomain = dillards.com, relayhost = smtp.dillards.com, masquerade_domains = dillards.com)

entrypoint.sh <<-- Entrypoint script to allow startup of postfix service while also maintaining non-root user on entry

jack-test-gitlab_mail.dockerfile-TEST <<-- Dockerfile used during testing



--------------------------------------------------------------------------------------------------------


December 18, 2023


ovioprod1-7845851
ovioprod2-7845851


ssh padmin@ovioprod1-7845851
ssh padmin@ovioprod2-7845851

scp -r /miscdatashare/PCIe3_4-Port_16Gb_FC_Adapter-mcode padmin@ovioprod1-7845851:/fix
scp -r /miscdatashare/PCIe3_4-Port_16Gb_FC_Adapter-mcode padmin@ovioprod2-7845851:/fix

# Instructions on updating microcode
oem_setup_env
set -o vi

rpm -ihv --ignoreos /fix/PCIe3_4-Port_16Gb_FC_Adapter-mcode/df1000e314101406.00014000020062400006.aix.rpm
diag -d fcs0 -T download



--------------------------------------------------------------------------------------------------------


January 15, 2024



.) Add crontab entry on lpbastionsrv1 for post image build to send email with status to EAT and other teams

.) Lnimsrv1 - Redo base 7.3 alt_disk_copy to hdisk1 and revert hdisk0 back to 7.2.5.6 backup
        - Do Storix backup of 7.2 media (Lnimsrv1)
        - Check and deploy a "tstsrv" for AIX (Sister Lpar to Lnimsrv1 - throw it on opposite Frame)

---

EMAIL_LIST="jack.sims@dillards.com jesse.harmon@dillards.com enterprisearchitecture@dillards.com UnixAdmin@dillards.com WebAdmin@dillards.com team-infosec@dillards.com"

echo "Images have been rebuilt and pushed to Artifactory" | mailx -r unixadmin@dillards.com -s "Red Hat UBI Monthly Patches for unixadmin-ocp-base-images $(date +"%Y-%m-%d")"  $EMAIL_LIST



jesse.harmon@dillards.com
zac.johnson@dillards.com
team-infosec@dillards.com
enterprisearchitecture@dillards.com
UnixAdmin@dillards.com
WebAdmin@dillards.com

---

Server:         172.16.18.15
Address:        172.16.18.15#53

Name:   ltstsrv1.dillards.com
Address: 172.16.18.113

Server:         172.16.18.15
Address:        172.16.18.15#53

Name:   ltstsrv2.dillards.com
Address: 172.16.3.28

Server:         172.16.18.15
Address:        172.16.18.15#53

Name:   ltstsrv3.dillards.com
Address: 172.16.3.57

Server:         172.16.18.15
Address:        172.16.18.15#53

Name:   otstsrv1.dillards.com
Address: 172.16.18.150

Server:         172.16.18.15
Address:        172.16.18.15#53

Name:   otstsrv2.dillards.com
Address: 172.16.3.38

Server:         172.16.18.15
Address:        172.16.18.15#53

** server can't find otstsrv3: NXDOMAIN

---

Server-9105-22A-SN78458D1-OC

otstsrv3 - 172.16.19.### ?

ovioprod1-78458D1

cadminsrv01/miscdatashare/AIX_7_2ML05SP03.iso



--------------------------------------------------------------------------------------------------------


January 16, 2024


mount -o loop /miscdatashare/AIX_7-2-5-7fp.iso /mnt/ISO2
cp /mnt/ISO2/* /miscdatashare/AIX_7-2-5-7fp




mount -o loop /miscdatashare/AIX_v7.2_Install_7200-05-03-2136_flash_092021_LCD8236411.iso /mnt/ISO2


--------------------------------------------------------------------------------------------------------


January 19, 2024

# Where to get aix downloads and stuff

https://public.dhe.ibm.com/aix/freeSoftware/aixtoolbox/ezinstall/ppc/



--------------------------------------------------------------------------------------------------------


January 22, 2024


simsjo-a@lnimsrv1: $ id
uid=11558(simsjo-a) gid=410(unixadm) groups=1(staff)

/home/simsjo-a
simsjo-a@lnimsrv1: $ groups
unixadm staff

mkgroup id=410 admin=false unixadm
mkuser id=11558 pgrp=unixadm groups=unixadm,staff home=/home/simsjo-a shell=/usr/bin/ksh93 simsjo-a

------------------------

cp /opt/freeware/etc/dnf/dnf.conf /opt/freeware/etc/dnf/dnf.conf.GA

/opt/freeware/etc/dnf/dnf.conf


---
https://public.dhe.ibm.com/aix/freeSoftware/aixtoolbox/RPMS/ppc-7.3/ -> AIX_Toolbox
---

[main]
plugins=1
cachedir=/var/cache/yum
keepcache=1
debuglevel=2
logfile=/var/log/yum.log
exactarch=1
obsoletes=1

[AIX_Toolbox]
name=AIX generic repository
baseurl=http://oredrepo1d.dillards.com/pulp/repos/Dillards_NIX_Satellite/Library/custom/AIX_ToolBox/ppc/
enabled=1
gpgcheck=0

[AIX_Toolbox_noarch]
name=AIX noarch repository
baseurl=http://oredrepo1d.dillards.com/pulp/repos/Dillards_NIX_Satellite/Library/custom/AIX_ToolBox/noarch/
enabled=1
gpgcheck=0

[AIX_Toolbox_73]
name=AIX 7.3 specific repository
baseurl=http://oredrepo1d.dillards.com/pulp/repos/Dillards_NIX_Satellite/Library/custom/AIX_ToolBox/ppc-7_3/
enabled=1
gpgcheck=0


---

laap2cntlrprod1:/ansible_staged_files

dnf_aixtoolbox.sh
dnf.conf

simsjo-a@lnimsrv1: $ ls -lart /usr/bin | grep -ie dnf
lrwxrwxrwx    1 root     system           21 Jan 22 13:06 dnf -> /opt/freeware/bin/dnf

ln -s /usr/bin/dnf /opt/freeware/bin/dnf


--------------------------------------------------------------------------------------------------------


January 23, 2024

$ pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org <package_name>




--------------------------------------------------------------------------------------------------------


January 25, 2024

Before:

[simsjo-a@cadminsrv01 AIX_7.3_Template]$ ls -lart
total 40
drwxr-xr-x   3 simsjo-a unixadm   75 Jan 18 13:14 openssl3
drwxr-xr-x   2 simsjo-a unixadm   45 Jan 18 13:14 sudo_1.9.15.5
drwxr-xr-x   2 simsjo-a unixadm   74 Jan 18 13:14 java8_64bit-800815 (Newer)
-rwxr-x---   1 simsjo-a unixadm 7745 Jan 18 13:15 sshd_fix_config.sh
-rw-r--r--   1 simsjo-a unixadm  857 Jan 18 13:15 nextboot
drwxr-xr-x   4 simsjo-a unixadm  142 Jan 18 13:17 SDDPCM_2.6.9.0
drwxr-xr-x   2 simsjo-a unixadm   53 Jan 18 13:17 RPM_4.9.1.3 (Kill)
drwxr-xr-x   2 simsjo-a unixadm 4096 Jan 18 13:17 OpenSSH_7.1.102.1100
drwxr-xr-x   2 simsjo-a unixadm  227 Jan 18 13:17 UPTIME_7.7.2
drwxr-xr-x   3 simsjo-a unixadm   98 Jan 18 13:17 STORIX_8.2.5.4
drwxr-xr-x   2 simsjo-a unixadm   99 Jan 18 13:17 BigFix
drwxr-xr-x   2 simsjo-a unixadm 4096 Jan 18 13:17 YUM_bundle_v2 (Kill)
drwxr-xr-x   2 simsjo-a unixadm 4096 Jan 18 13:17 YUM_bundle_v4 (Kill)
drwxr-xr-x   2 simsjo-a unixadm   41 Jan 18 13:17 RPM_4.15.1.1006 (Newer?)
----------   - -------- ------- ---- --- -- ----- Commvault Tar?
drwxr-xr-x  14 simsjo-a unixadm 4096 Jan 18 13:21 .
drwxrwxrwx 121 root     root    8192 Jan 23 08:46 ..


After:

[simsjo-a@cadminsrv01 AIX_7.3_Template]$ ls -lart
total 32
drwxr-xr-x   3 simsjo-a unixadm   75 Jan 18 13:14 openssl3
drwxr-xr-x   2 simsjo-a unixadm   74 Jan 18 13:14 java8_64bit-800815
-rwxr-x---   1 simsjo-a unixadm 7745 Jan 18 13:15 sshd_fix_config.sh
-rw-r--r--   1 simsjo-a unixadm  857 Jan 18 13:15 nextboot
drwxr-xr-x   4 simsjo-a unixadm  142 Jan 18 13:17 SDDPCM_2.6.9.0
drwxr-xr-x   2 simsjo-a unixadm 4096 Jan 18 13:17 OpenSSH_7.1.102.1100
drwxr-xr-x   2 simsjo-a unixadm  227 Jan 18 13:17 UPTIME_7.7.2
drwxr-xr-x   3 simsjo-a unixadm   98 Jan 18 13:17 STORIX_8.2.5.4
drwxr-xr-x   2 simsjo-a unixadm   99 Jan 18 13:17 BigFix
drwxr-xr-x   3 simsjo-a unixadm   29 Jan 23 10:45 Commvault_11.28
drwxr-xr-x   2 simsjo-a unixadm   65 Jan 25 07:50 lsof_4.892
drwxr-xr-x   2 simsjo-a unixadm   33 Jan 25 07:52 RPM_4.15.1.2007
drwxr-xr-x  13 simsjo-a unixadm 4096 Jan 25 07:52 .
drwxrwxrwx 121 root     root    8192 Jan 25 07:59 ..
drwxr-xr-x   2 simsjo-a unixadm   45 Jan 25 07:59 sudo_1.9.15.5


--------------------------------------------------------------------------------------------------------


February 9, 2024

'
#!/bin/bash

set -e;

declare -A hm

while getopts a:b:c: flag
do
    case "${flag}" in
        a) hm[a]="${OPTARG}";;
        b) hm[b]="${OPTARG}";;
        c) hm[c]="${OPTARG}";;
    esac
done

for i in ${!hm[@]}
do
  printf "$i"
  if [ -d ${hm[$i]} ]; then
    printf "\t\"${hm[$i]}\" is a directory.\n"
  else
    printf "\t\"${hm[$i]}\" is NOT a directory.\n"
  fi
done

#if [ -d $var_1 ]; then
#  printf "$var_1 is a directory.\n"
#else
#  printf "$var_1 is not a directory.\n"
#fi

#if [[ -z "$var_1" ]]; then
#  printf "$var_1 is Null.\n"
#else
#  printf "$var_1\n"
#fi
'

---

ls -ld /*/ | awk '{print $9}' | xargs -I{} du -sh ./{} 2>/dev/null

---

import numpy as np

def NormalizeData(data):
    return (data - np.min(data)) / (np.max(data) - np.min(data))

---

---

import os
sum(os.path.getsize(f) for f in os.listdir('.') if os.path.isfile(f))







--------------------------------------------------------------------------------------------------------


February 13, 2024



curl -Lk "https://172.16.100.15:6082/php/uid.php?vsys=1&rule=18&url=http://ports.ubuntu.com"%"2f" -H "Host: 172.16.100.15:6082"  -H "Referer: https://172.16.100.15:6082/php/uid.php?vsys=1&rule=18&url=http://ports.ubuntu.com"%"2f" -H "Connection: keep-alive" --data "inputStr=&user=simsjo&passwd=uSop0329dominate&ok=Login"


----

# SETUP

sudo podman login registry.redhat.io ...
sudo podman pull registry.redhat.io/rhel9/mariadb-105:1-164

# on lufcpoc1 (permissions can be played with, opened it up to make standup quicker)
sudo mkdir -p /dai/MariaDB
sudo chown root:root /dai/MariaDB
sudo chmod 777 /dai/MariaDB

# use userid instead of username
sudo podman run --name mariadb_database -e MYSQL_ROOT_PASSWORD=GenAIrag -v /dai/MariaDB:/var/lib/mysql/data -p 3306:3306 -d registry.redhat.io/rhel9/mariadb-105:1-164

sudo podman logs -f mariadb_database

# Get IP of container
sudo podman inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mariadbtest

--------

# TEST

sudo podman logs -f mariadb_database

sudo podman exec -it mariadb_database bash
mysql -h 0.0.0.0 -u root
> SHOW SCHEMAS;

or

# This requires mariadb-connector-c and devel to be installed on system + mariadb via pip/conda
# Some tweaking here might need to be done for testing
import mariadb
import sys
import time

LINE_UP = '\033[1A'
LINE_CLEAR = '\x1b[2K'

try:
    conn = mariadb.connect(
        user="root",
        password="GenAIrag",
        host="laicompprod1",
        port=3306
        )

except mariadb.Error as e:
    print(f"Error connecting to MariaDB Platform: {e}")
    sys.exit(1)

# Get Cursor
cur = conn.cursor()
databases = ("SHOW SCHEMAS;")
connections = ("show status where variable_name = 'threads_connected';")

cur.execute(databases)

for (databases) in cur:
        print(databases[0])

print("\n")

while True:
        cur.execute(connections)
        for connection in cur:
                print(f"Connection count is {connection[0]} : {connection[1]}")
                print(LINE_UP, end=LINE_CLEAR)
        time.sleep(1)


--------

# CLEANUP

sudo podman stop mariadb_database
sudo podman rm mariadb_database
sudo rm -rf /dai/MariaDB/*



--------------------------------------------------------------------------------------------------------


March 04, 2024





.) yum install nmap # (To get nping command)

.) mkdir -p /fix/ping_collection

.) run collection as at job

echo "while true; do date; nping --tcp-connect -p 6379 10.100.127.61; sleep 5; done | tee /fix/ping_collection/$(hostname)_nping.dillards.com" | at now
# Connecting directly to Ldtsdbprod1


---


[root@ldtsprod1 ping_collection]# cat ldtsprod1_nping.dillards.com | grep -ie "TCP connection attempts" | grep -iv "failed: 0"
TCP connection attempts: 5 | Successful connections: 4 | Failed: 1 (20.00%)
TCP connection attempts: 5 | Successful connections: 4 | Failed: 1 (20.00%)

[root@ldtsprod1 ping_collection]# cat ldtsprod1_nping.dillards.com | grep -ie "max rtt" | awk '{if ( $3+0 > 3) print $_}'
Max rtt: 8.777ms | Min rtt: 1.589ms | Avg rtt: 3.234ms
Max rtt: 3.910ms | Min rtt: 1.374ms | Avg rtt: 2.237ms
Max rtt: 32.572ms | Min rtt: 1.707ms | Avg rtt: 8.023ms
Max rtt: 15.420ms | Min rtt: 1.460ms | Avg rtt: 4.415ms
Max rtt: 6.426ms | Min rtt: 1.674ms | Avg rtt: 2.680ms
Max rtt: 56.409ms | Min rtt: 1.434ms | Avg rtt: 12.689ms
Max rtt: 7.034ms | Min rtt: 1.714ms | Avg rtt: 2.852ms
Max rtt: 3.286ms | Min rtt: 1.634ms | Avg rtt: 2.272ms
Max rtt: 55.458ms | Min rtt: 1.344ms | Avg rtt: 12.446ms
Max rtt: 45.217ms | Min rtt: 1.731ms | Avg rtt: 14.011ms
Max rtt: 21.655ms | Min rtt: 1.639ms | Avg rtt: 5.990ms
Max rtt: 3.247ms | Min rtt: 1.540ms | Avg rtt: 2.080ms



# Make wrapper for the following ssh <host> | tee /tmp/<log_file>.log